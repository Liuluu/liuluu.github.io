<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>Android笔记 - 活动 | 念久</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/6.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/0.6.2/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">Android笔记 - 活动</h1><a id="logo" href="/.">念久</a><p class="description">回首向来萧瑟处，归去，也无风雨也无晴。</p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a><a href="/history/"><i class="fa fa-book"> 历史</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">Android笔记 - 活动</h1><div class="post-meta">Jan 7, 2018<span> | </span><span class="category"><a href="/categories/Android/">Android</a></span><script src="https://dn-lbstatics.qbox.me/busuanzi/2.3/busuanzi.pure.mini.js" async></script><span id="busuanzi_container_page_pv"> | <span id="busuanzi_value_page_pv"></span><span> 阅读</span></span></div><div class="post-content"><p>定义：包含用户界面的组件。</p>
<p>用途：主要用于和用户进行交互。</p>
<h2 id="注册活动、Toast和Menu"><a href="#注册活动、Toast和Menu" class="headerlink" title="注册活动、Toast和Menu"></a>注册活动、Toast和Menu</h2><h4 id="在AndroidManifest文件中注册"><a href="#在AndroidManifest文件中注册" class="headerlink" title="在AndroidManifest文件中注册"></a>在AndroidManifest文件中注册</h4><p>所有活动都要在AndroidManifest中注册才能生效。</p>
<p><strong>配置主活动：</strong> 在<activity>标签内加入<intent-filter>标签，并添加声明action和category。</intent-filter></activity></p>
<p>android:label用来指定活动中标题栏的内容。 <strong>注意：</strong> 给主活动指定的label还会成为Launcher中应用程序显示的名称。</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div></pre></td><td class="code"><pre><div class="line">&lt;manifest xmlns:android=<span class="string">"http://schemas.android.com/apk/res/android"</span></div><div class="line">    <span class="keyword">package</span>=<span class="string">"com.example.lll.activitytest"</span>&gt;</div><div class="line"></div><div class="line">    &lt;application</div><div class="line">        ...&gt;</div><div class="line">        &lt;activity</div><div class="line">            android:name=<span class="string">".FirstActivity"</span></div><div class="line">            android:label=<span class="string">"This is FirstActivity"</span>&gt;</div><div class="line">            &lt;intent-filter&gt;</div><div class="line">                &lt;action android:name=<span class="string">"android.intent.action.MAIN"</span> /&gt;</div><div class="line">                &lt;category android:name=<span class="string">"android.intent.category.LAUNCHER"</span> /&gt;</div><div class="line">            &lt;/intent-filter&gt;</div><div class="line">        &lt;/activity&gt;</div><div class="line">    &lt;/application&gt;</div><div class="line"></div><div class="line">&lt;/manifest&gt;</div></pre></td></tr></table></figure>
<h4 id="Toast"><a href="#Toast" class="headerlink" title="Toast"></a>Toast</h4><ol>
<li>通过静态方法makeText()方法创建一个Toast对象。参数列表：<ol>
<li>Context对象</li>
<li>显示的文本内容</li>
<li>显示的时长：有两个内置常量（Toast.LENGTH_SHORT和Toast.LENGTH_LONG）</li>
</ol>
</li>
<li>调用Toast对象的show()方法显示</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">Toast.makeText(FirstActivity.<span class="keyword">this</span>, <span class="string">"toast content"</span>, Toast.LENGTH_SHORT).show();</div></pre></td></tr></table></figure>
<h4 id="Menu"><a href="#Menu" class="headerlink" title="Menu"></a>Menu</h4><ul>
<li>在res目录下新建一个menu文件夹，再在文件夹下新建一个叫main的菜单文件(New-&gt;Menu resource file)</li>
<li>在main.xml下添加如下代码<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">menu</span> <span class="attr">xmlns:android</span>=<span class="string">"http://schemas.android.com/apk/res/android"</span>&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span></span></div><div class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/add_item"</span></span></div><div class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">"Add"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">item</span></span></div><div class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/remov_item"</span></span></div><div class="line"><span class="tag">        <span class="attr">android:title</span>=<span class="string">"Remove"</span> /&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">menu</span>&gt;</span></div></pre></td></tr></table></figure>
</li>
</ul>
<p><item>标签就是用来创建具体的某一个菜单项。</item></p>
<ul>
<li>在activity中重写<code>onCreateOptionsMenu()</code>方法<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">onCreateOptionsMenu</span><span class="params">(Menu menu)</span> </span>&#123;</div><div class="line">    getMenuInflater().inflate(R.menu.main, menu);</div><div class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<p>通过<code>getMenuInflater()</code>方法能够得到MenuInflater对象，再调用它的<code>inflate()</code>方法给当前活动创建菜单。</p>
<p>inflate()方法接受两个参数：1.用于指定通过哪个资源文件来创建菜单；2.用于指定菜单项添加到哪一个menu对象当中。</p>
<p>inflate()返回true，表示允许创建的菜单显示出来，如果返回了false，创建的菜单将无法显示。</p>
<ul>
<li>定义菜单响应事件：onOptionsItemSelected()<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">public</span> bllean <span class="title">onOptionsItemSelected</span><span class="params">(MenuItem item)</span> </span>&#123;</div><div class="line">    <span class="keyword">switch</span> (item.getItemId()) &#123;</div><div class="line">        <span class="keyword">case</span> R.id.add_item:</div><div class="line">            ...</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">case</span> R.id.remove_item:</div><div class="line">            ...</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
</li>
</ul>
<h4 id="finish"><a href="#finish" class="headerlink" title="finish()"></a>finish()</h4><p>销毁活动，效果和按下back键是一样的。</p>
<h2 id="Intent"><a href="#Intent" class="headerlink" title="Intent"></a>Intent</h2><p>Intent是Android程序中各组件之间进行交互的一种重要方式，不仅可以指明当前组件想要执行的动作，还可以在不同组件之间传递数据。</p>
<p>Intent大致可以分为两种：显式Intent和隐式Intent</p>
<h3 id="使用Intent启动活动"><a href="#使用Intent启动活动" class="headerlink" title="使用Intent启动活动"></a>使用Intent启动活动</h3><h4 id="显式Intent启动活动"><a href="#显式Intent启动活动" class="headerlink" title="显式Intent启动活动"></a>显式Intent启动活动</h4><ol>
<li>构建一个Intent，第一个参数为上下文，第二个参数为目标活动</li>
<li>通过startActivity()来执行这个Intent。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">Intent intent = <span class="keyword">new</span> Intent(FisrtActivity.<span class="keyword">this</span>, SecondActivity.class);</div><div class="line">startActivity(intent);</div></pre></td></tr></table></figure>
<h4 id="隐式Intent启动活动"><a href="#隐式Intent启动活动" class="headerlink" title="隐式Intent启动活动"></a>隐式Intent启动活动</h4><p>隐式Intent指定了一系列更为抽象的action和category等信息，然后交由系统去分析这个Intent并找出合适的活动去启动。</p>
<ol>
<li>在AndroidMenifest.xml文件中指定当前活动能够相应的action和category，只有<action>和<category>中的内容同时能够匹配Intent中指定的action和category时，这个活动才能相应Intent。</category></action></li>
<li>使用Intent的另一个构造函数，传入action字符串，表明我们想要启动能够相应这个字符串的action的活动。如果不为Intent添加category，则会在调用startActivity()方法时添加默认category（android.intent.category.DEFAULT）到Intent中。</li>
<li>每个Intent中只能指定一个action，但却能指定多个category。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">Intent intent = <span class="keyword">new</span> Intent(<span class="string">"com.example.activitytest.ACTION_START"</span>);</div><div class="line">intent.addCategory(<span class="string">"com.example.activitytest.MY_CATEGORY"</span>);</div><div class="line">startActivity(intent);</div></pre></td></tr></table></figure>
<p>隐式Intent同样可以启动其他程序的活动，如调用系统的浏览器打开网页。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">Intent intent = <span class="keyword">new</span> Intent(Intent.ACTION_VIEW);</div><div class="line"></div><div class="line"><span class="comment">// Uri.parse() 将网址字符串解析成一个uri对象</span></div><div class="line"><span class="comment">// setDate() 传递对象</span></div><div class="line"> intent.setData(Uri.parse(<span class="string">"http://www.baidu.com"</span>));</div><div class="line"> </div><div class="line"> startActivity(intent);</div></pre></td></tr></table></figure>
<h3 id="使用Intent传递数据"><a href="#使用Intent传递数据" class="headerlink" title="使用Intent传递数据"></a>使用Intent传递数据</h3><h4 id="向下一个活动传递数据"><a href="#向下一个活动传递数据" class="headerlink" title="向下一个活动传递数据"></a>向下一个活动传递数据</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 第一个Activity中：将想要传递的数据暂存在Intent中</span></div><div class="line">String data = <span class="string">"Hello, SecondActivity"</span>;</div><div class="line">Intent intent = <span class="keyword">new</span> Intent(FirstActivity.<span class="keyword">this</span>, SecondActivity.class);</div><div class="line">intent.putExtra(<span class="string">"key"</span>, data);</div><div class="line"></div><div class="line">startActivity(intent);</div><div class="line"></div><div class="line"></div><div class="line"><span class="comment">// 第二个Activity中：根据key取出对应值</span></div><div class="line">Intent intent = getIntent();</div><div class="line">String data = intent.getStringExtra(<span class="string">"key"</span>);</div></pre></td></tr></table></figure>
<h4 id="返回数据给上一个活动"><a href="#返回数据给上一个活动" class="headerlink" title="返回数据给上一个活动"></a>返回数据给上一个活动</h4><p>startActivityForResult()：用于启动活动，期望在新活动销毁时能返回一个结果给上一个活动。两个参数：第一个参数为Intent，第二个参数是请求码，用于在之后的回调中判断数据来源。</p>
<p>setResult()：专门用于向上一个活动返回数据。两个参数：1.返回处理结果（一般使用RESULT_OK或RESULT_CANCELED两个值）2.带有数据的Intent</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// FirstActivity中使用startActivityForResult启动新活动，并设置请求码</span></div><div class="line">Intent intent = <span class="keyword">new</span> Intent(FirstActivity.<span class="keyword">this</span>, SecondActivity.class);</div><div class="line">StartActivityForResult(intent, <span class="number">1</span>);</div><div class="line"></div><div class="line"><span class="comment">// SecondActivity为按钮注册点击事件，添加返回数据的逻辑</span></div><div class="line">Intent intent = <span class="keyword">new</span> Intent();</div><div class="line">intent.putExtra(<span class="string">"data_return"</span>, <span class="string">"Hello, FirstActivity"</span>);</div><div class="line"></div><div class="line">setResult(RESULT_OK, intent);</div></pre></td></tr></table></figure>
<p>使用<code>startActivityForResult()</code>来启动SecondActivity，在SecondeActivity销毁后会调用上一个活动的<code>onActivityResult()</code>方法。因此需要在FirstActivity中重写改方法来获取返回的数据。</p>
<p>onActivityResult()方法有三个参数：</p>
<ol>
<li>启动活动时传入的请求码</li>
<li>第二个活动返回的处理结果</li>
<li>返回数据的Intent</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onActivityResult</span><span class="params">(<span class="keyword">int</span> requestCode, <span class="keyword">int</span> resultCode, Intent data)</span> </span>&#123;</div><div class="line">    <span class="comment">// 判断数据来源</span></div><div class="line">    <span class="keyword">switch</span> (requestCode) &#123;</div><div class="line">        <span class="keyword">case</span> <span class="number">1</span>:</div><div class="line">            <span class="comment">// 判断处理结果</span></div><div class="line">            <span class="keyword">if</span> (resultCode == RESULT_OK) &#123;</div><div class="line">                String data = data.getStringExtra(<span class="string">"data_return"</span>);</div><div class="line">                Logd.(TAG, data);</div><div class="line">            &#125;</div><div class="line">            <span class="keyword">break</span>;</div><div class="line">        <span class="keyword">default</span>:</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="活动的生命周期"><a href="#活动的生命周期" class="headerlink" title="活动的生命周期"></a>活动的生命周期</h2><h4 id="返回栈"><a href="#返回栈" class="headerlink" title="返回栈"></a>返回栈</h4><p>Android使用<strong>任务</strong>来管理活动。一个任务就是一组存放在栈里的活动的集合，这个栈也称为<strong>返回栈</strong>。</p>
<p>栈是一种后进先出的数据结构。</p>
<p>系统总是会显示处于栈顶的活动给用户。</p>
<h4 id="活动状态"><a href="#活动状态" class="headerlink" title="活动状态"></a>活动状态</h4><ol>
<li>运行状态：位于栈顶时。</li>
<li>暂停状态：不再位于栈顶，但仍然可见。</li>
<li>停止状态：不再位于栈顶，并且完全不可见。</li>
<li>销毁状态：从返回栈中移除后。</li>
</ol>
<h3 id="活动的生命周期-1"><a href="#活动的生命周期-1" class="headerlink" title="活动的生命周期"></a>活动的生命周期</h3><p>Activity类定义了<strong>7个回调方法</strong>，覆盖了活动生命周期的每一个环节。</p>
<ul>
<li>onCreate()：在活动第一次被创建的时候调用。</li>
<li>onStart()：在活动由不可见变为可见时候调用。</li>
<li>onResume()：在活动准备好和用户进行交互的时候调用。</li>
<li>onPause()：在活动准备去启动或恢复另一个活动时候调用。</li>
<li>onStop()：在活动完全不可见时调用。</li>
<li>onDestroy()：在活动被销毁之前调用。</li>
<li>onRestart()：在活动由停止状态变为运行状态之前调用。</li>
</ul>
<h4 id="三个生存期"><a href="#三个生存期" class="headerlink" title="三个生存期"></a>三个生存期</h4><ol>
<li><strong>完整生存期</strong>：在onCreate()和onDestroy()方法之间所经历的。一般情况下，一个活动会在onCreate()中完成各种<strong>初始化</strong>操作，在onDestroy()中完成<strong>释放内存</strong>操作。</li>
<li><strong>可见生存期</strong>：在onStart()和onStop()方法之间所经历的。可以通过这两个方法，合理管理对用户可见的资源。如在onStart()中<strong>加载资源</strong>，在onStop()中<strong>释放资源</strong>，从而保证处于停止状态的活动不会占用过多内存。</li>
<li><strong>前台生存期</strong>：在onResume()和onPause()方法之间所经历的。此时活动总是处于<strong>运行状态</strong>，可以与用户进行交互。</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 当活动创建时</span></div><div class="line">onCreate()</div><div class="line">onStart()</div><div class="line">onResume()</div><div class="line"></div><div class="line"><span class="comment">// 调用第二个活动</span></div><div class="line">onPause()</div><div class="line">onStop()</div><div class="line"></div><div class="line"><span class="comment">// 回到第一个活动</span></div><div class="line">onRestart()</div><div class="line">onStart()</div><div class="line">onResume()</div><div class="line"></div><div class="line"><span class="comment">// 启动一个Dialog</span></div><div class="line">onPause()</div><div class="line"></div><div class="line"><span class="comment">// 关闭Dialog</span></div><div class="line">onResume()</div><div class="line"></div><div class="line"><span class="comment">// back回到桌面</span></div><div class="line">onPause()</div><div class="line">onStop()</div><div class="line">onDestroy()</div></pre></td></tr></table></figure>
<h3 id="活动被回收"><a href="#活动被回收" class="headerlink" title="活动被回收"></a>活动被回收</h3><p>onSaveInstanceState()：在活动被回收之前会调用该方法，解决活动被回收时数据得不到保存的问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// 保存临时数据</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onSaveInstanceState</span><span class="params">(Bundle outState)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onSaveInstanceState(outState);</div><div class="line">    outState.putString(<span class="string">"data_key"</span>, <span class="string">"data"</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// onCreate()方法中进行数据恢复</span></div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">onCreate</span><span class="params">(Bundle savedInstanceState)</span> </span>&#123;</div><div class="line">    <span class="keyword">super</span>.onCreate(savedInstanceState);</div><div class="line">    setContentView(R.layout.activity_main);</div><div class="line">    </div><div class="line">    <span class="keyword">if</span> (savedInstanceState != <span class="keyword">null</span>) &#123;</div><div class="line">        String data = savedInstanceState.getString(<span class="string">"data_key"</span>);</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<h2 id="活动的启动模式"><a href="#活动的启动模式" class="headerlink" title="活动的启动模式"></a>活动的启动模式</h2><p>共有四种启动模式：standard、singleTop、singleTask、singleInstance。可以在AndroidManifest.xml中通过给<activity>标签指定android:launchMode属性来选择启动模式。</activity></p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">activity</span></span></div><div class="line"><span class="tag">    <span class="attr">android:name</span>=<span class="string">".FisrtActivity"</span></span></div><div class="line"><span class="tag">    <span class="attr">android:launchMode</span>=<span class="string">"singleTop"</span>&gt;</span>     <span class="comment">&lt;!-- 指定启动模式 --&gt;</span></div><div class="line">    <span class="tag">&lt;<span class="name">intent-filter</span>&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">action</span> <span class="attr">android:name</span>=<span class="string">"android.intent.action.MAIN"</span> /&gt;</span></div><div class="line">        <span class="tag">&lt;<span class="name">category</span> <span class="attr">android:name</span>=<span class="string">"android:intent.category.LAUNCHER"</span> /&gt;</span></div><div class="line">    <span class="tag">&lt;/<span class="name">intent-filter</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">activity</span>&gt;</span></div></pre></td></tr></table></figure>
<h3 id="standard"><a href="#standard" class="headerlink" title="standard"></a>standard</h3><p>standard是活动的默认启动模式。对于使用standard模式的活动，系统不会在乎这个活动是否已经在返回栈中存在，每次启动都会创建该活动的一个新的实例。</p>
<h3 id="singleTop"><a href="#singleTop" class="headerlink" title="singleTop"></a>singleTop</h3><p>在启动活动时，如果返回栈的栈顶已经是该活动，则认为可以直接使用它，不会再创建新的活动实例。</p>
<p>当活动并未处于栈顶位置时，再启动该活动，还是会创建新的实例的。</p>
<h3 id="singleTask"><a href="#singleTask" class="headerlink" title="singleTask"></a>singleTask</h3><p>被指定为singleTask模式的活动，在整个程序的上下文中只存在一个实例。</p>
<p>每次启动该活动时系统首先会在返回栈中检查是否存在该活动的实例，如果发现已经存在则直接使用该实例，并把<strong>在这个活动之上的所有活动统统出栈</strong>，如果没有发现就会创建一个新的活动实例。</p>
<h3 id="singleInstance"><a href="#singleInstance" class="headerlink" title="singleInstance"></a>singleInstance</h3><p>被指定为singleInstance模式的活动，会启用一个新的返回栈来管理这个活动。不管哪个应用程序来访问这个活动，都共用同一个返回栈。</p>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://liuluu.github.io/2018/01/07/Android笔记-活动/" data-id="cjckiz9dy0000ewglv3ag2w2g" class="article-share-link">分享</a><div class="tags"><a href="/tags/Android/">Android</a><a href="/tags/第一行代码/">第一行代码</a><a href="/tags/读书笔记/">读书笔记</a></div><div class="post-nav"><a href="/2018/01/07/Android笔记-布局/" class="pre">Android笔记 - 布局</a><a href="/2017/09/07/（一）软件测试心理学/" class="next">软件测试艺术 - 软件测试心理学</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><form action="//www.google.com/search" method="get" accept-charset="utf-8" target="_blank" class="search-form"><input type="text" name="q" maxlength="20" placeholder="Search"/><input type="hidden" name="sitesearch" value="http://liuluu.github.io"/></form></div><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Android/">Android</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/Android/" style="font-size: 15px;">Android</a> <a href="/tags/第一行代码/" style="font-size: 15px;">第一行代码</a> <a href="/tags/读书笔记/" style="font-size: 15px;">读书笔记</a> <a href="/tags/Hexo/" style="font-size: 15px;">Hexo</a> <a href="/tags/github/" style="font-size: 15px;">github</a> <a href="/tags/eclipse/" style="font-size: 15px;">eclipse</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/软件测试的艺术/" style="font-size: 15px;">软件测试的艺术</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2018/01/07/Android笔记-布局/">Android笔记 - 布局</a></li><li class="post-list-item"><a class="post-list-link" href="/2018/01/07/Android笔记-活动/">Android笔记 - 活动</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/07/（一）软件测试心理学/">软件测试艺术 - 软件测试心理学</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/08/02/eclipse注释配置/">Eclipse - 注释配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/07/19/hello-world/">Hello World!</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://jalan.space/" title="忘归" target="_blank">忘归</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2018 <a href="/." rel="nofollow">念久.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.0.47/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>